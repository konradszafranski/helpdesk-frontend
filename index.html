<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="description" content="Helpdesk App">
<meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="icon" href="">

<body class="w3-light-grey" style="height:100vh">

  <div class="w3-display-container" style="height:100vh;">
    <h1 class="w3-display-middle w3-text-cyan" style="vertical-align:middle;"> Helpdesk System </h1>
  </div>

  <script type="module">

    import { isUserLogged, getUserRole } from "./service/service.js"

    document.addEventListener("DOMContentLoaded", function() {
      setTimeout(function() {

        console.log("event - navigate to");

        if(isUserLogged()) {
          let userRole = getUserRole();

          //navigate to correct view
          switch(userRole) {
            case "Office":
              location.assign("http://127.0.0.1:3000/panel/officePanel.html");
              break;
            case "Helpdesk":
              location.assign("http://127.0.0.1:3000/panel/helpdeskPanel.html");
              break;
            case "Administrator":
              location.assign("http://127.0.0.1:3000/panel/adminPanel.html");
              break;
          }
        } else {
          location.assign("http://127.0.0.1:3000/panel/loginPanel.html");
        }
      }, 1500);
    });
  </script>

</body>

</html>
